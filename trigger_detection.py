from myKey import key
from openai import OpenAI

# optional imports - work in progress
# from IPython.display import display, Image, Audio
# import cv2  # We're using OpenCV to read video, to install !pip install opencv-python
import base64
import time
import os
import requests

client = OpenAI(api_key=key)


# Function to check if the image is triggering or not
def is_triggering_image(image_url, triggers):
  print(f"openai got the following url: {image_url}")
  response = client.chat.completions.create(
    model="gpt-4o",
    messages=[
      {
        "role": "user",
        "content": [
          {"type": "text", "text": f"will the following image be highly disturbing for someone who suffers from ptsd from war"
                                   f"? answer in yes or no"},
          {
            "type": "image_url",
            "image_url": {
              "url": image_url,
            },
          },
        ],
      }
    ],
    max_tokens=300,
  )
  return "yes" in response.choices[0].message.content.lower()


# print(is_triggering_image(lion_image_url, animal_triggers))

def is_triggering_text(text, triggers):
  response = client.chat.completions.create(
    model="gpt-4o",

    messages=[
      {"role": "user",
       "content": f"will the following text be highly disturbing for someone who suffers from ptsd from war?"
                  f" Answer in yes or no: {text}"},
    ],

    max_tokens=300,
  )
  return "yes" in response.choices[0].message.content.lower()


if __name__ == "__main__":
  image_url = "https://media.npr.org/assets/artslife/movies/2010/03/war/pacificbattle_wide-847752c6b8068f889abfead58d946746218c0c94.jpg?s=1300&c=85&f=webp"
  lion_image_url = "data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAkGBxITEhUSEhMVFRUWFRUVFRUVFRcWFxUVFRUWFxUVFxUYHSggGBolGxYWITEhJSkrLi4uGB8zODMtNygtLisBCgoKDg0OGxAQGi0dHR0tLS0tLS0tLS0tLS0tLS0rLS0tLS0tLS0tLS4tLS0tLS0tLS0rLS0rKy0rLS0tLSstLf/AABEIALcBEwMBIgACEQEDEQH/xAAcAAABBQEBAQAAAAAAAAAAAAAAAQMEBQYCBwj/xAA8EAABAwIDBQcCBQIFBQEAAAABAAIRAyEEEjEFQVFhcQYTIoGRobHB8BQyQtHhYvEjJFJykgczotLiFv/EABkBAAMBAQEAAAAAAAAAAAAAAAACAwEEBf/EACURAAICAgMAAwACAwEAAAAAAAABAhEDIRIxQQQTIkJRMmFxFP/aAAwDAQACEQMRAD8A9lQhCU0EIQgAQhCABCEIAEIQgAQhCDBEJVy9AHUoUJ+JjW19eakU6oIQZY6kQ0pUGgEIQgASIQgBUICEACEIQaCEIQAIQhAAhCEACEIQAIQhAAhCEACEIQAIQhAAhCEACELkuQYdIKjYjEhok7tVTY7tM1vhDSXXjcJA4oDsvy5MV64AuYWHq9p8S4kBgafOeGhF1Q7c23ichcSecfpI0MaEH75rzj/Y6hJ+Gl2n2iYCQHZgZbYiQRvsb6KDs7tgBLSY1LZ0EASD6D/kVgtk40OqZj+p15/qsfSVIxTQHm2rXHzGYH5Up5uMqKw+OnGz1jYfaJlUC9yW2P8AUD9+S0VOqCJC8R7PVXAMvFv3j2+Vq8D2tyBzX3dYNA5tF/ID1KIZlJ0zJ4HHaPRgUqy2ze0QcfFbcB7k/C0tOqCJVk0+iLTXZ2lXGZdStMFQhCABCEINBCEIAEIQgAQhCABCEIAEIQgwEIlJKAFQklLKDQQiUjigAc8DVRcRjmN1I9YnpxTGPxMAgkAfPReRduNp0GggUSL/AJs5A6FhB3HeJ6pkrEcj0La/bCnRvJgb4MfEHyKyGL/6sDPkpszk7wCL3ib2Xj1asalQMpgy8hrYgAkmBIA5raYzZbMLSDGHxAeN1rki548VHPnhipdtl8HxpZbd0kW+O7X4msD4Cxp0hwPkZP0SbM20Ww15I4Tu4KmwNbKwS0G0wcpcWk6kWIE7yVLdTY6BDqTnWy1GuyzuBOkG17HquOfyZSVNHbD4sY7T2bQ1WvaDvixCjYmkKggxe07iDvWX2ftCpQIDgTTNpBBLDMHqOSv6uKAbmOkgT1OvuuKU5HbGEfTEmmadZ1M7yY/3A36SPeCrao/OJm4h3lYOHrHon8bh82IpuI/NPk4Zv/lK7CZDUg2IYWgx+s3HqSumUnJJ+nPGKi2vBvZdaAANGgCfVcVmEYiY1YHR0sB7fKn7M2fAvaSXOHBoG/2suMe6HUqp/UHtPmC5vS8rFpmva2WGHxOWoW9D5fY91sNn7aaGNBdd1yZ/KwTA6/wvMDjCahIMnK1vmCfRLidqd0BMnwiAq45uLI5ccZnr2G200mZsLAczp8SVIw+3aLnuBqMDWQHEuAGciSJJ3D7svCXbRxFYwHFoFoBI11uN6RlCmPzEE8TxVv8A0peEF8Vv0+i8Ni6dQE03seBYljg6Dwsnl4D2ZxT8PXFSk4g8jZw3tcN7b717ps3GtrUw9u8XF7OgSL9U+LPGbr0TLgljSfjJSEIVyAISErkvQYdoTedAegBxCbzpcyAO0JA5LKABCEIAiGuk/EKgftMcUw7a0Kf2RKfWzTfiF0K6yzNrg71IZtQcVn2xD62aHv0zWrwJn2VK/aoAlUuO7YU2TvjUT9n2TKafRji12WO29qU2sJquEee/gWz99V4b2t2411Q920ZDI8UXBJg2Nx8LQdo+0vfSA0hsyAYJ6a7l5/tCqXGLR9OvBPFicR7sxWaMXRc6ABUB06x7wtfjsQ+vXDWggOcOpvx0AWBpS0hwMEEEciDIXoX4wV6QqNIEthzJ0I1FjouL5S/cZ1fh6HxH+JQuvS/p7U2dhW92aoc8Xd3YzOJ6jSNyg/8A6LDYg5aNJxO4uLWyDxHDmZ9V55tKA8xrpe3SVs+w3ZlhpmvVqNJ1GWZaBzkAeiWeGChydjQzTc+KNEdlNF5yk3MjjukWn5TL8VYscBaL7jukdQJhWmIw8tc5/hpgHwgmSBvJ+ws9hmWzObvsyZAHOdddVwqLmzvclFFnh6X/AGiT4s0gcv3j5UDFvJxREQ0Mpnf+h039D6KwrOAGfNFoA37t03v8JvE0S+m5wuQ10nTUGAY4TK6YutHLJXssMXiRmIB1AJnhCqtoMNSmxpEXAPJwBHoo+z65qvYbAZAXA87e0FTKg8YaH7rWtYzf2QvyDfL/AIZSrSdQqkOBv5R5easXMY+XH+wEwPdTe0WFzU5Ni24dMqJs2ke7Y54DZBHne5HUfCJu1yCKp8RjvGkROVp4akTvKnYXEYJ3+GX0ydCHGPoB7qk7XuNNzQBZ7TcWNjBE/tyVdsSk2YIny+4TLGlHkzHO58Uaw4E0KgAMsddjpnMOE8l652Lqf5YHi9x+B9F5bsfAOc5tJjZDtG6hpH6v6QN/JetYGm2lTbTbo1oHXifM3R8beRy8RnytY1D1lrnXJqKJ36bfiF380edwZMdWTL66rq2NAVbW2kklmiho4ZM0H4hH4hZo7QKBtBZ9yN+pmmOIStrrNfjynaW0Cs+9WH0s0ja6dbVWdZtBS6eNBVFkTJuDRdd6EKsGKSJ7FowRxJUariSUy56iVqq8xWz0WTqdY8VMp4iNSqSjVTG0tpBrfzj0g/KeONtiOdFrtjGtDLPLXbjJFwvOdp417nkuN95EQfIapMftF862VXnLjdwB4arshHijmlLkSbqHiW8FNbTgXMqHU6LbBIj5QNVO2BVy1ZNgWuHnuKjtYNf7KVs3DOc+WjQcL34cFktpo2OnYxtGmC4nMTfQjTovQuwmDhpcXE6HlI0jeSOJ9AqTA9m8zwalzI8I47gTx5LfUmMoUot4RLiBa2oA5aDrvXNmyVDidWKFz5DHaKue5LB+ZxAAA0FnOn/x9lRDEBkNmY1AmI32XG0MdN9TcngHG5j2HkncFsPPlDngOdBhzgPQEykxwUVsfJNydI0WyXzlLxGcjKDeLWn5S7fwZZTcWkeMtGm6wd7BNim6hXYH+NmQ5XaeICAHDdafRP4zF97bd00SN03ZSKuqMJs4kYkU51DpjSC+WR5EraYjDMY0eAmDGscLz5rK7Fo/5isNHMflA/pJiZ5ArXAuqMNKPFp5x7brJs010hMUPWV2PwxeA0xBEgjWJ+iMTRGSQ2WMHiA3hoGnoVMxdSnRp02vqtBaCHA3Lj+qAbwISscwDwkOY8aC9ovEfwpbrZXV6Mj2k7Nvr5a9KpmGUNynQW1aeOuvqoGy9nFhAJIIsRB4AXtyW72JTGR9OLNcYHCYj4KkNwLXxpcSCbW5xwKJZZVwNjjhfIsuy9BrKQfAzO/VvjcJ4WlXgxKqmEsYGxlgAQNPLkmH4spoppUicqbtl06vzTNTEqsGNSOxUodmaJNapO9QatRcOrLhwlKaN1MRCZbiilqU0jaSdSpE3GyXSrSnO+URphJ3iVjqieyspFPEwqfv09SqrU2hXFMtvxqFBD0q37ZGfVEzr32UKo5Wj8PZV1ehdbCgkiLiHANmVlNpYkl1pvuMOBVvtjHAf4bYJ38vRUJYNd+88V3QVLZxzdsgvonUnyCcqCGiBCdcEzmtlT2Toco15tElcubOvNM06sHz0T1VunPVZIaJwGGwA/nn6Lddm9mZGAgEE6vcIjjlnU81ltjVIqCI3DmeQjetpidoPZlDAM2m+1t29Sm6RWCtl1hMM2mM7jEaTaBvP8lU+1sf3pgWYPKf4sPZTKtNzmeMzOvz99Vn8Y83iJmDG4zu5SCuPH+57O3J+IaGKGFNarkzlgbEuibkj0S47YgoVXDGVKg8c06rnPDKlKAcrXNIAfOa2u+CFxsrExWAA1id2kyZWxobXLC6laozcyo3M0X3aui+m6VebfKlohBLjfZmuxXaJ1eucK55fTaXGk59393P5S43IE2m91ocFZ9QHQPIHQLLbSfRoY2niaTA23+IxlhmIc10WidPRT6O1gXyRAcZjqtzQvozDOuy0pYb/MPeBqLm0GbT7K32LUDHvJ/0SOZFz7Koq7Ta1/hBIc25iMpHEKM7axaHFsHzB0/suaSdnTFxM/gcuMaXDCvrV3S0nL4M8nx94dBymwtG9aPCbCo4NlOlm7zEQe9LXHKxxktAGk3jok2ZjcmFZSpHJDnucGmJLnZpJ13+wTuCoZQSAL+LoYkmRp5p8ktaFhHavwl4KrkeRucAB1Nx7j3Km7MrS3KfzUyepEnd/tIKr/wpNNhIhxDb9BY/VRKNdwrAzEiDHIwQeYP1XM2joSfhtH+JsjUfCrK7oUrZdQmxslx2FVoStWc84tSorM6Q1FxXYQohqp6J2Te8TjKygB6cpuSNDJk9IuKZTzWpCiI1VyiPqKZXYoGIaqRJyEbWUqjVVW1yd75M4iKRcCshVzatkKdD8ixxJa1pc4gNFySYAWD2z2kzuLKH5dC/ef8AbwHNVW09t1sSQKjhlGjGiAD8kpjBiHWXVjxKG3tksmVz0tIHg8P4XGWNVPxAIuNN37Qq6uLieGn0VVJsk4pDbnjh98FFN3aqW4AaapmozxD71ToRjLmx6ypFR4iVFrNINzZOxDeK1irst+zwHeAxeNfvz9lqKAl+bXcOvJZHYNaDzNumv35BbHDOyjnHp/Chm1Evh3ItWuht7QDbhGp++Ky9ZstnmZ85n3V1UdLS0Gx1O88f281S13iHAcbfX4J6Llwf5WdefcaIeGpFtTSd0RO8EWOqtcbiobl/UbEnXTf7DyKbFHwgtkkQRATWMpQ3MRDtw67zz1XXVs5LpaKmsx1VwBPiJk8mtBJnfNo81132R3iJkzAG4J7DANqlzjDRTGSdJcS6Z9AVXYuqalWSN4Ajlz3qjW6J3SsnDat4EhoEXO7rwU2lUDoIEE2O+eKYpbNn9MdQpdPBvESIvY/fRQnRaF2P0GZSGmZ+dw325c1pMBTDmDe1w4HfPmOYVOyk1zQDqHC4N4dYg7jp7LS9m395SgSHU3EEWvNz7/K5ZvVnXDser0Q0NFyIAF/vgsy5pFZw3ZiRyK1m1i0ZQep8tPqsvl/xXQYOaY6/SI8x687Z0RRotj1rhW+KcqPZM5tI4hXtVshPif5JZl+imxQVU9l1e4jDqF+GurKaIuBDpU5UinRUptBOtopHMZQG2MUhtNGROMCWzaI1SmoeIoq1cxMvoplIHEzr6KZLbq+qYdQ6mFVFMk8ZFZolT4w6VFoKZ5Y2Bu0uVJYL8UwGiJ4p5ptm36/fHeuvs5yzcLDl76FVFdtweKt8O+QY4Hy4/Kqagk5tQPD1K2IstjYZN03VN+idrWEhR2J0I0NYgRMrugQW8wVzUvdM4QkOPOU7WhL2WGxbPB3SfqSfQLXYN+Yx1P08oWKY8tzR5dFqtlVrQN9yeXD1UsiuJXG6kW9R9iBbcOn3Ko8R+YDd9gfVXOIeMs7gPvzVTVbeTqbxwG4fK5IRpnXN2iVhMboDrPQch98FB2uHGowC+ZwB6C4XHduJMDfrfmNysMMxp8VTvARF2sECNHE5SR9V0pPs52/DhmBmo1s5jOhsLHTpKy2O2jWo1HCozLWznPI0G7INI/ZehYXZ7DEVagdLQCRPiLbTbfM9Vc7S7OYXGsaKwPeAAd4AWu8zHslxT/VM3LD82jzrZ/aWp3YOQVADBOkGNCm8d2uqtcAAAZBcwCw/pJIkkjhCidodgVcBXFN0ljnZqRabviw5hwkT1W+7A9h2sH4jFMDqrjmDTfLc3O6Tr5q8qW2STvrslbKwz34alUxAyue5xDQCMrXOHdtO87rnirPZYNF1V5nK8NcJsQYIM8TYX5DkrXF4MPdJ72NIFmiBwVbtrBNyhoYQXCziSXWvcbrT7rymnKTPUTSikVWM2hncHQYuG9ARP19Vz+FmHjUWniOfJN0MISwAXgajkYjkbBWWzxESORUZdll0T9mM0KswCmsHSgKWyE7/ADFIjdybGTTlcHD8lPa1KWBT5Glb3CTulPLE06mtsaiIWJQxSe6SmmtsyiNC67tPCmghFhRFqUVDqUValqafQlbyCitFNCtW4YQhbyDieCNqEtAPJo9Pu6dJ8LuQACacLjhMlOGdPM+a9NHmMTFYosOUWblnzIj9/ZcUXyPeExtI2aL3hN0al45KlaEXZNxIlhPwo1MqYwS0tI3KHSbpu5LIs2SGnhNE5XFSw3VM4psQ7gqIm0K79v3+VoNh1hlN9IkngNyoKrbx0+ql4OoWsfFy97RG7Qz1v8JBjWYeqHNDt2onfz5hI5hJsOZJ+/7JvAkBoc65IBvzSYnFA9OHHyUnEqpCOsLTffN/U+d7LrZmLYxxlxE6lpJM+djvUZsvJJNm2HtMD0UGt0trHGOa1S8MaPStl4inUbma4H0Fo68VZUcQG/mdpz3cV5x2bxNYSGBruLTaCdLgdFp2bGq1XA1KmWW3bTkAG1ydT8JoRa8MnJdWZT/qbtkVMTh4v3V9R4TmE6G2gN16DsPtFSqgDMNNZ0nW/wB71lsZ2TBe45R+ZuUnXxA6ef1VxgexlHLN2O4tMRHSx81Rkl2bF1VsSDPQrMba2kDldENacpjcHGMydfsqrTYQaxcNBYTv4dVENBpOQixBbB3iZ+q83O3GVHp4EnGwo+F0biSWxo5p1HJ2iuKFFpEj+4Vfs7BnKaZvluw744H73q7wVGOs3UVH1lJS8Q5TZZdManjTQGpJu2bBUjphXUptdtU2NQpC4LE4EShANwiF0gpkA24hNEruo1Mkobo1I7QE13i6a5JY6RICE33iFthR4DSEnkJJ5QlpvJeecEjlwRSHhtv+L7t+iTDOu48vk/yvZR47I+P/ADRwTdAAdVyXZnk8ypFFuqpLSEjtkzDjqUyKRD3Ru9gRf6p+haJlPVmQ8HcR5yPsqKey1aIZo68ZUfGM1Csv1RpcffVN49hiba7vhUUicokOmzM3NyE+Qgrimd3MOHCQf7qVswSC3qotekRfn9+0rW90YlovqOJDmZf9JaLcLkewKYqVpe7gBACrcDicsg7yPaSPr6qVixFQcHggcJEQPMQVlB0WWCqeEj0TlemJB45lU0Kha5s8QD5tP7eyu6dMloPAn790klRSLsc2O80XuI3mR/Hsttg8YMmt9YBjoJ6+6ymFwngngJCnME02FukyfTf6JFn4qhnhUnZrKj2yIsfD6NNvT6qY2tHlY/fG6yprkVACf0j2j9/lW9MmJP8Aqnz0R9/+jfpX9kqpiMziNyiYjCEkEboI/wCS7oiSY+5srehRmCuabcnbOiKUVSDZ2F4qc2hBUjCUoaOi6eErMT2MlqbLU45cOCkyqGi1KGroMTjWpas2zkU0mROoW0jLGciTu04V01GjbGHU1GfRVmGrl1NY4gpFUaa4LVPqsUd7VNoqnZHSpzKhYNR4Q8a8gGjzTFQhrSeJJtwAt7p82jpmPnp9VE2lYAc8v/tZe5Hs8WXRHpt+k+eqmYdtvZM0Bu5lS6LbW13LZsyCJVHTqn6gkW4fH3omhMz5H6J4A7zYKJZHIgw6b25HX790rmSw+aVuX9MG+nqnaAnN7j31W2BUbO8Lj1I/hWGIpBzeRH7+8KHXZlqCOvSFOpPkE7jB6RM/fJbPexYa0VmJw0R6+k2++KcrXpt/pcYvaDcehA9VYupzlG+bj59vhQcXSiWbiIHUQYSxmPKAj3ZqWbe0CfgE+/otBszxUfvcB/Pos5hXGCNx9wSQR7lWnZDFfnpE3BBHQuh3sfbmnataJrTL/Zj81Mg7g4HykfQJ3ZlS2U8I87QouwzlNVp3E+0fv7qVhmQ48yFJxKp6J1JuZzXcIB+vwrmgZaOkn1VZRZHmFa7PYc8HQgg+enuskklZqt6HMPTg38+mnzBV/SAAj7uq+rhT5j4j+6nUwuWUjoUScyouXuTTF0UrkHFIbqPSMch9Nd06aTdj6oUBdgJxlNdmmnUWTckM5UaJwtTLlrRqdnD3Lhr1zUK4Yp7spqibTThCZpFOlyqlojLsYqgKvrOU2u5V1UXUZl4AHoQGISFLPDKn6+ob5DX6qDtI/k8z6kJEL3IdnjT6OcOfk/Kngx5CUqFkuwj0PYccb3mFMBmeYskQkZRA1sbuB8tU+1xzTOv0QhIMR8ZSBLjoRu14/eqa2YIcWOuCY6G+nshCf+Iv8ia2kS4neDlN9+4j481F2pSDnAjhPpqfcIQua9nRWiM2l4SDxEH5UHD1yyqSNSHAxreD8geiEK+JkMqNThsb4nv/ANTQ4+rQfr6LRhotzv8AVCE0+zIEth8IP3v/AGWjwVKMp8vrPrCEKOfSK4ey1gQmiUIXGzpQ5TKdCEIiDFyrtjUIVEibY/SauihCp4S9G6jlDqPQhTkWxoaF12KaELYoaTF0XLqqRCSWgjsZqVlHxItISIUZMqkMMY6EIQkGP//Z"
  war_triggers = "violence, war, blood"
  sexual_triggers = "sexual, nudity"
  animal_triggers = "lions, sharks, snakes"
  print(is_triggering_text("i was walking in the street today and i fell", animal_triggers))
